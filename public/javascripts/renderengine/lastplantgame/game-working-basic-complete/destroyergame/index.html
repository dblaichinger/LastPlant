<!-- ChromeFrame Support -->
<meta http-equiv="X-UA-Compatible" content="IE=9;chrome=1">
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<!--
   /**
    *
    * The JS Game was created with Renderengine renderengine.com
    *
    * Permission is hereby granted, free of charge, to any person obtaining a copy
    * of this software and associated documentation files (the "Software"), to deal
    * in the Software without restriction, including without limitation the rights
    * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
    * copies of the Software, and to permit persons to whom the Software is
    * furnished to do so, subject to the following conditions:
    *
    * The above copyright notice and this permission notice shall be included in
    * all copies or substantial portions of the Software.
    *
    * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
    * THE SOFTWARE.
    *
    */
-->

<html>
   <head>
      <title>The Last Plant</title>

      <!-- Mobile WebKit View Definition
		<meta name="viewport" content="width=device-width; initial-scale=1.0; minimum-scale=1.0 maximum-scale=1.0; user-scalable=0;"/>
		 -->
		 
		<!-- FlashCanvas for older IE -->
		<!--[if lt IE 9]>
		<script type="text/javascript" src="../../libs/flashcanvas.js"></script>
		<![endif]-->
		 
      <!-- Supporting Libraries -->
      <script type="text/javascript" src="../../libs/base.js"></script>
      <script type="text/javascript" src="../../libs/jquery.js"></script>
      <script type="text/javascript" src="../../libs/jquery.ext.engine.js"></script>
      <script type="text/javascript" src="../../libs/sylvester.js"></script>

      <!-- Load the main engine script -->
      <script type="text/javascript" src="../../engine/runtime/engine.js"></script>

      <style type="text/css">
      	body {
      		font: 10pt Arial;
            background-color:#efefce;

      	}
        #storage {
            position:absolute;
            left:0px; 
            top:450px;
        }
        #buttons {
            position:absolute;
            left:0px; 
            top:500px;
        }
      </style>
   </head>
   <body>
        <script src="createXHR.js" type="text/javascript"></script>
        <script type="application/javascript">
            function getData(){
                var req = null; 

                document.ajax.dyn.value="Started...";
                if(window.XMLHttpRequest)
                    req = new XMLHttpRequest(); 
                else if (window.ActiveXObject)
                    req  = new ActiveXObject(Microsoft.XMLHTTP); 

                req.onreadystatechange = function(){
                    
                    document.ajax.dyn.value="Wait server...";
                    if(req.readyState == 4)
                    {
                        if(req.status == 200)
                        {
                            document.ajax.dyn.value="Received:" + req.responseText;	
                            
                            //für XML
                            //var doc = xhr.responseXML;   // Assign the XML file to a var
                            //var element = doc.getElementsByTagName('root').item(0);   // Read the first element
                            //document.ajax.dyn.value= element.firstChild.data;    // Assign the content to the form
                            
                            //blueX=parseInt(req.responseText);
                            var storing = document.getElementById("storage");
                            storing.innerHTML = req.responseText;	
                        }	
                        else	
                        {
                            document.ajax.dyn.value="Error: returned status code " + req.status + " " + req.statusText;
                        }	
                    } 
                }; 
                req.open("GET", "ajax-post-text.txt", true); 
                req.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"); 
                req.send(null); 
            } 
        </script>   
   
      <script type="text/javascript">
      	$(document).ready(function() {
			// Load the game script
			Engine.loadGame('game.js','LastPlant','LastPlant Game');
		});
      </script>
      <div id="storage">{"OverallNumberOfBlocks":4,"Blocks":[{"Type":"Block","PosX":744,"PosY":300,"Rot":21},{"Type":"Block","PosX":585,"PosY":379,"Rot":-269},{"Type":"Block","PosX":547,"PosY":337,"Rot":-269},{"Type":"Block","PosX":609,"PosY":295,"Rot":-269},{"Type":"Plant","PosX":777,"PosY":362,"Rot":0}]}</div>
      <div id="buttons">
        <FORM name="ajax" method="POST" action="">
            <p>
                <input type="text" name="dyn" size="200" value="">
            </p>
            <p>
                <INPUT type="button" value="Load from Server"  ONCLICK="getData()">
            </p>        
        </FORM>
      </div>
   </body>
</html>
